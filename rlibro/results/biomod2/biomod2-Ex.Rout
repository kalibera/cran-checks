
R Under development (unstable) (2026-01-22 r89316) -- "Unsuffered Consequences"
Copyright (C) 2026 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> pkgname <- "biomod2"
> source(file.path(R.home("share"), "R", "examples-header.R"))
> options(warn = 1)
> library('biomod2')
biomod2 4.3-4-4 loaded.
 /!\ Welcome to augmented biomod2 with abundance modeling available! (*o*)
 Take a look at the HOME and NEWS section on the website to see all the features!

Loading required package: nnet
Loading required package: rpart
Loading required package: cito
Torch is not yet installed
Please run the following before using cito
"library("torch")"
"install_torch()"
see: https://torch.mlverse.org/docs/articles/installation.html
Loading required package: mda
Loading required package: class
Loaded mda 0.5-5

Loading required package: gam
Loading required package: splines
Loading required package: foreach
Loaded gam 1.22-7

Loading required package: mgcv
Loading required package: nlme
This is mgcv 1.9-4. For overview type '?mgcv'.

Attaching package: ‘mgcv’

The following objects are masked from ‘package:gam’:

    gam, gam.control, gam.fit, s

The following object is masked from ‘package:nnet’:

    multinom

Loading required package: gbm
Loaded gbm 2.2.3
This version of gbm is no longer under development. Consider transitioning to gbm3, https://github.com/gbm-developers/gbm3
Loading required package: earth
Loading required package: Formula
Loading required package: plotmo
Loading required package: plotrix
Loading required package: maxnet
Loading required package: randomForest
randomForest 4.7-1.2
Type rfNews() to see new features/changes/bug fixes.
Loading required package: xgboost
> 
> base::assign(".oldSearch", base::search(), pos = 'CheckExEnv')
> base::assign(".old_wd", base::getwd(), pos = 'CheckExEnv')
> cleanEx()
> nameEx("BIOMOD.ensemble.models.out")
> ### * BIOMOD.ensemble.models.out
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.ensemble.models.out
> ### Title: 'BIOMOD_EnsembleModeling()' output object class
> ### Aliases: BIOMOD.ensemble.models.out BIOMOD.ensemble.models.out-class
> ###   show,BIOMOD.ensemble.models.out-method
> 
> ### ** Examples
> 
> showClass("BIOMOD.ensemble.models.out")
Class "BIOMOD.ensemble.models.out" [package "biomod2"]

Slots:
                                                        
Name:               modeling.id                 dir.name
Class:                character                character
                                                        
Name:                   sp.name           expl.var.names
Class:                character                character
                                                        
Name:                 data.type               models.out
Class:                character BIOMOD.stored.models.out
                                                        
Name:                     em.by              em.computed
Class:                character                character
                                                        
Name:                 em.failed           em.models_kept
Class:                character                      ANY
                                                        
Name:         models.evaluation     variables.importance
Class: BIOMOD.stored.data.frame BIOMOD.stored.data.frame
                                                        
Name:         models.prediction   models.prediction.eval
Class: BIOMOD.stored.data.frame BIOMOD.stored.data.frame
                                                        
Name:                      link                     call
Class:                character                      ANY
> 
> ## ----------------------------------------------------------------------- #
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> ## ----------------------------------------------------------------------- #
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }

-=-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Data Formating -=-=-=-=-=-=-=-=-=-=-=-=-=-=

 !!! Some data are located in the same raster cell. 
          Please set `filter.raster = TRUE` if you want an automatic filtering.
 ! Some NAs have been automatically removed from your data
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Single Models -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


Checking Models arguments...

	> Automatic weights creation to rise a 0.5 prevalence
Creating suitable Workdir...


Checking Cross-Validation arguments...

   > Random cross-validation selection

-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Modeling Options -=-=-=-=-=-=-=-=-=-=-=-=-=-=

	>  RF options ( datatype: binary , package: randomForest , function: randomForest )...
	>  GLM options ( datatype: binary , package: stats , function: glm )...

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=



-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Modeling Summary -=-=-=-=-=-=-=-=-=-=-=-=-=

> 5 environmental variables ( bio3 bio4 bio7 bio11 bio12 )

> Number of calibration/validation splits : 2
 CV.do.full.models activated: + 1 models

> Algorithms selected : RF GLM
 3 models for each algorithm

Total number of model runs: 6 

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Warning: executing %dopar% sequentially: no parallel backend registered


-=-=-=--=-=-=- GuloGulo_allData_RUN1_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN1_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN2_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN2_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_allRun_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_allRun_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> 
> ## ----------------------------------------------------------------------- #
> # Model ensemble models
> myBiomodEM <- BIOMOD_EnsembleModeling(bm.mod = myBiomodModelOut,
+                                       models.chosen = 'all',
+                                       em.by = 'all',
+                                       em.algo = c('EMmean', 'EMca'),
+                                       metric.select = c('TSS'),
+                                       metric.select.thresh = c(0.7),
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)

-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Ensemble Models -=-=-=-=-=-=-=-=-=-=-=-=-=-=

   ! all models available will be included in ensemble.modeling
  ! Ensemble Models will be filtered and/or weighted using validation dataset (if possible). Please use `metric.select.dataset` for alternative options.
   > Evaluation & Weighting methods summary :
      TSS over 0.7

!!! Removed models using the Full dataset as ensemble models cannot merge repetition dataset (RUN1, RUN2, ...) with Full dataset unless em.by = 'PA+run'.

  > mergedData_mergedRun_mergedAlgo ensemble modeling

   > Mean of probabilities by TSS ...
			Evaluating Model stuff...
			Evaluating Predictor Contributions... 

  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%


   > Committee averaging by TSS ...
			Evaluating Model stuff...
			Evaluating Predictor Contributions... 

  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodEM

-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.ensemble.models.out -=-=-=-=-=-=-=-=-=-=-=-=-=

Modeled species (sp.name) : GuloGulo

Modeling id (modeling.id) : AllModels ( 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/GuloGulo.AllModels.models.out 
)

Explanatory variables (expl.var.names) : bio3 bio4 bio7 bio11 bio12


Computed models (em.computed) :  
GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo 
GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo

Failed models (em.failed) :  none

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD.formated.data.PA")
> ### * BIOMOD.formated.data.PA
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.formated.data.PA
> ### Title: 'BIOMOD_FormatingData()' output object class (with
> ###   pseudo-absences)
> ### Aliases: BIOMOD.formated.data.PA BIOMOD.formated.data.PA-class
> ###   BIOMOD.formated.data.PA,numeric,data.frame-method
> ###   BIOMOD.formated.data.PA,numeric,SpatRaster-method
> 
> ### ** Examples
> 
> showClass("BIOMOD.formated.data.PA")
Class "BIOMOD.formated.data.PA" [package "biomod2"]

Slots:
                                                                              
Name:        PA.strategy          PA.table         data.type          dir.name
Class:         character        data.frame         character         character
                                                                              
Name:            sp.name             coord      data.species      data.env.var
Class:         character        data.frame               ANY        data.frame
                                                                              
Name:          data.mask     has.data.eval        eval.coord eval.data.species
Class:              list           logical        data.frame               ANY
                                                                              
Name:  eval.data.env.var has.filter.raster   biomod2.version              call
Class:        data.frame           logical         character               ANY

Extends: "BIOMOD.formated.data"
> 
> ## ----------------------------------------------------------------------- #
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Keep only presence informations
> DataSpecies <- DataSpecies[which(DataSpecies[, myRespName] == 1), ]
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> ## ----------------------------------------------------------------------- #
> # Format Data with pseudo-absences : random method
> myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                      resp.var = myResp,
+                                      resp.xy = myRespXY,
+                                      expl.var = myExpl,
+                                      PA.nb.rep = 4,
+                                      PA.strategy = 'random',
+                                      PA.nb.absences = 1000)

-=-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Data Formating -=-=-=-=-=-=-=-=-=-=-=-=-=-=

 !!! Some data are located in the same raster cell. 
          Please set `filter.raster = TRUE` if you want an automatic filtering.

Checking Pseudo-absence selection arguments...

   > random pseudo absences selection
   > Pseudo absences are selected in explanatory variables
   > All available cells have been selected ( 49 cells )

 ! Some NAs have been automatically removed from your data
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodData

-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.formated.data -=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeling directory (dir.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck

Modeled species (sp.name) : GuloGulo

	 22 presences,  0 true absences and  49 undefined points in dataset


	 5 explanatory variables

      bio3            bio4           bio7           bio11         
 Min.   :21.36   Min.   :4393   Min.   :168.9   Min.   :-132.389  
 1st Qu.:24.33   1st Qu.:6214   1st Qu.:247.9   1st Qu.: -61.092  
 Median :26.03   Median :7351   Median :283.4   Median : -26.944  
 Mean   :27.12   Mean   :7272   Mean   :282.9   Mean   : -33.647  
 3rd Qu.:30.10   3rd Qu.:8314   3rd Qu.:316.9   3rd Qu.:  -5.129  
 Max.   :39.17   Max.   :9895   Max.   :377.1   Max.   :  38.714  
     bio12       
 Min.   : 485.3  
 1st Qu.: 605.2  
 Median : 668.3  
 Mean   : 782.1  
 3rd Qu.: 816.5  
 Max.   :2243.9  


 1 Pseudo Absences dataset available ( PA1 ) with  49 (PA1) pseudo absences

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> plot(myBiomodData)

  ! Calibration/Validation data is missing, plot.valid set to FALSE
  ! Evaluation data is missing, plot.eval set to FALSELoading required namespace: tidyterra
Loading required namespace: ggtext
$data.vect
 class       : SpatVector 
 geometry    : points 
 dimensions  : 93, 3  (geometries, attributes)
 extent      : 1.5, 28.5, 46.00001, 67.00001  (xmin, xmax, ymin, ymax)
 coord. ref. :  
 names       :  resp         dataset    part
 type        : <num>           <chr>   <chr>
 values      :    10 Initial dataset Initial
                  10 Initial dataset Initial
                  10 Initial dataset Initial

$data.label
                              9                              10 
                "**Presences**"       "Presences (calibration)" 
                             11                              12 
       "Presences (validation)"        "Presences (evaluation)" 
                             19                              20 
            "**True Absences**"   "True Absences (calibration)" 
                             21                              22 
   "True Absences (validation)"    "True Absences (evaluation)" 
                             29                              30 
          "**Pseudo-Absences**" "Pseudo-Absences (calibration)" 
                             31                               1 
 "Pseudo-Absences (validation)"                    "Background" 

$data.plot

> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD.formated.data")
> ### * BIOMOD.formated.data
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.formated.data
> ### Title: 'BIOMOD_FormatingData()' output object class
> ### Aliases: BIOMOD.formated.data BIOMOD.formated.data-class
> ###   BIOMOD.formated.data,numeric,data.frame-method
> ###   BIOMOD.formated.data,data.frame,ANY-method
> ###   BIOMOD.formated.data,numeric,matrix-method
> ###   BIOMOD.formated.data,numeric,SpatRaster-method
> ###   show,BIOMOD.formated.data-method
> 
> ### ** Examples
> 
> showClass("BIOMOD.formated.data")
Class "BIOMOD.formated.data" [package "biomod2"]

Slots:
                                                                              
Name:          data.type          dir.name           sp.name             coord
Class:         character         character         character        data.frame
                                                                              
Name:       data.species      data.env.var         data.mask     has.data.eval
Class:               ANY        data.frame              list           logical
                                                                              
Name:         eval.coord eval.data.species eval.data.env.var has.filter.raster
Class:        data.frame               ANY        data.frame           logical
                                          
Name:    biomod2.version              call
Class:         character               ANY

Known Subclasses: "BIOMOD.formated.data.PA"
> 
> ## ----------------------------------------------------------------------- #
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> ## ----------------------------------------------------------------------- #
> # Format Data with true absences
> myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                      resp.var = myResp,
+                                      resp.xy = myRespXY,
+                                      expl.var = myExpl)

-=-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Data Formating -=-=-=-=-=-=-=-=-=-=-=-=-=-=

 !!! Some data are located in the same raster cell. 
          Please set `filter.raster = TRUE` if you want an automatic filtering.
 ! Some NAs have been automatically removed from your data
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodData

-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.formated.data -=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeling directory (dir.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck

Modeled species (sp.name) : GuloGulo

	 22 presences,  49 true absences and  0 undefined points in dataset


	 5 explanatory variables

      bio3            bio4           bio7           bio11         
 Min.   :21.36   Min.   :4393   Min.   :168.9   Min.   :-132.389  
 1st Qu.:24.33   1st Qu.:6214   1st Qu.:247.9   1st Qu.: -61.092  
 Median :26.03   Median :7351   Median :283.4   Median : -26.944  
 Mean   :27.12   Mean   :7272   Mean   :282.9   Mean   : -33.647  
 3rd Qu.:30.10   3rd Qu.:8314   3rd Qu.:316.9   3rd Qu.:  -5.129  
 Max.   :39.17   Max.   :9895   Max.   :377.1   Max.   :  38.714  
     bio12       
 Min.   : 485.3  
 1st Qu.: 605.2  
 Median : 668.3  
 Mean   : 782.1  
 3rd Qu.: 816.5  
 Max.   :2243.9  

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> plot(myBiomodData)

  ! Calibration/Validation data is missing, plot.valid set to FALSE
  ! Evaluation data is missing, plot.eval set to FALSE$data.vect
 class       : SpatVector 
 geometry    : points 
 dimensions  : 71, 3  (geometries, attributes)
 extent      : 1.5, 28.5, 46.00001, 67.00001  (xmin, xmax, ymin, ymax)
 coord. ref. :  
 names       :  resp         dataset    part
 type        : <num>           <chr>   <chr>
 values      :    20 Initial dataset Initial
                  10 Initial dataset Initial
                  10 Initial dataset Initial

$data.label
                              9                              10 
                "**Presences**"       "Presences (calibration)" 
                             11                              12 
       "Presences (validation)"        "Presences (evaluation)" 
                             19                              20 
            "**True Absences**"   "True Absences (calibration)" 
                             21                              22 
   "True Absences (validation)"    "True Absences (evaluation)" 
                             29                              30 
          "**Pseudo-Absences**" "Pseudo-Absences (calibration)" 
                             31                               1 
 "Pseudo-Absences (validation)"                    "Background" 

$data.plot

> summary(myBiomodData)
  dataset run PA Presences True_Absences Pseudo_Absences Undefined
1 initial  NA NA        22            49               0         0
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD.models.options")
> ### * BIOMOD.models.options
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.models.options
> ### Title: 'bm_ModelingOptions' output object class
> ### Aliases: BIOMOD.models.options BIOMOD.models.options-class
> ###   show,BIOMOD.models.options-method print,BIOMOD.models.options-method
> 
> ### ** Examples
> 
> 
> showClass("BIOMOD.models.options")
Class "BIOMOD.models.options" [package "biomod2"]

Slots:
                          
Name:     models   options
Class: character      list
> 
> 
> 
> 
> 
> cleanEx()
> nameEx("BIOMOD.models.out")
> ### * BIOMOD.models.out
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.models.out
> ### Title: 'BIOMOD_Modeling()' output object class
> ### Aliases: BIOMOD.models.out BIOMOD.models.out-class
> ###   show,BIOMOD.models.out-method
> 
> ### ** Examples
> 
> showClass("BIOMOD.models.out")
Class "BIOMOD.models.out" [package "biomod2"]

Slots:
                                                              
Name:                  modeling.id                    dir.name
Class:                   character                   character
                                                              
Name:                      sp.name                   data.type
Class:                   character                   character
                                                              
Name:               expl.var.names             models.computed
Class:                   character                   character
                                                              
Name:                models.failed         has.evaluation.data
Class:                   character                     logical
                                                              
Name:                 scale.models         formated.input.data
Class:                     logical BIOMOD.stored.formated.data
                                                              
Name:                  calib.lines              models.options
Class:    BIOMOD.stored.data.frame       BIOMOD.stored.options
                                                              
Name:            models.evaluation        variables.importance
Class:    BIOMOD.stored.data.frame    BIOMOD.stored.data.frame
                                                              
Name:            models.prediction      models.prediction.eval
Class:    BIOMOD.stored.data.frame    BIOMOD.stored.data.frame
                                                              
Name:                         link                        call
Class:                   character                         ANY
> 
> ## ----------------------------------------------------------------------- #
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> ## ----------------------------------------------------------------------- #
> # Format Data with true absences
> myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                      resp.var = myResp,
+                                      resp.xy = myRespXY,
+                                      expl.var = myExpl)

-=-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Data Formating -=-=-=-=-=-=-=-=-=-=-=-=-=-=

 !!! Some data are located in the same raster cell. 
          Please set `filter.raster = TRUE` if you want an automatic filtering.
 ! Some NAs have been automatically removed from your data
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> ## ----------------------------------------------------------------------- #
> # Model single models
> myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                     modeling.id = 'AllModels',
+                                     models = c('RF', 'GLM'),
+                                     CV.strategy = 'random',
+                                     CV.nb.rep = 2,
+                                     CV.perc = 0.8,
+                                     OPT.strategy = 'bigboss',
+                                     metric.eval = c('TSS', 'AUCroc'),
+                                     var.import = 3,
+                                     seed.val = 42)

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Single Models -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


Checking Models arguments...

	> Automatic weights creation to rise a 0.5 prevalence
Creating suitable Workdir...


Checking Cross-Validation arguments...

   > Random cross-validation selection

-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Modeling Options -=-=-=-=-=-=-=-=-=-=-=-=-=-=

	>  RF options ( datatype: binary , package: randomForest , function: randomForest )...
	>  GLM options ( datatype: binary , package: stats , function: glm )...

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=



-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Modeling Summary -=-=-=-=-=-=-=-=-=-=-=-=-=

> 5 environmental variables ( bio3 bio4 bio7 bio11 bio12 )

> Number of calibration/validation splits : 2
 CV.do.full.models activated: + 1 models

> Algorithms selected : RF GLM
 3 models for each algorithm

Total number of model runs: 6 

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


-=-=-=--=-=-=- GuloGulo_allData_RUN1_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN1_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN2_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN2_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_allRun_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_allRun_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodModelOut

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.models.out -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeling directory (dir.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck

Modeled species (sp.name) : GuloGulo

Modeling id (modeling.id) : AllModels

Explanatory variables (expl.var.names) : bio3 bio4 bio7 bio11 bio12


Computed models (models.computed) :  GuloGulo_allData_RUN1_RF 
GuloGulo_allData_RUN1_GLM GuloGulo_allData_RUN2_RF GuloGulo_allData_RUN2_GLM 
GuloGulo_allData_allRun_RF GuloGulo_allData_allRun_GLM

Failed models (models.failed) :  none

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD.options.dataset")
> ### * BIOMOD.options.dataset
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.options.dataset
> ### Title: 'bm_ModelingOptions' output object class
> ### Aliases: BIOMOD.options.dataset BIOMOD.options.dataset-class
> ###   BIOMOD.options.dataset,character-method
> ###   show,BIOMOD.options.dataset-method
> ###   print,BIOMOD.options.dataset-method
> 
> ### ** Examples
> 
> 
> showClass("BIOMOD.options.dataset")
Class "BIOMOD.options.dataset" [package "biomod2"]

Slots:
                                                                       
Name:   args.values        model         type      package         func
Class:         list    character    character    character    character
                                
Name:    args.names args.default
Class:    character         list

Extends: "BIOMOD.options.default"
> 
> 
> 
> 
> 
> cleanEx()
> nameEx("BIOMOD.options.default")
> ### * BIOMOD.options.default
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.options.default
> ### Title: 'bm_ModelingOptions' output object class
> ### Aliases: BIOMOD.options.default BIOMOD.options.default-class
> ###   BIOMOD.options.default,character,character-method
> 
> ### ** Examples
> 
> 
> showClass("BIOMOD.options.default")
Class "BIOMOD.options.default" [package "biomod2"]

Slots:
                                                                       
Name:         model         type      package         func   args.names
Class:    character    character    character    character    character
                   
Name:  args.default
Class:         list

Known Subclasses: "BIOMOD.options.dataset"
> 
> 
> 
> 
> 
> cleanEx()
> nameEx("BIOMOD.projection.out")
> ### * BIOMOD.projection.out
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.projection.out
> ### Title: 'BIOMOD_Projection()' output object class
> ### Aliases: BIOMOD.projection.out BIOMOD.projection.out-class
> ###   plot,BIOMOD.projection.out,missing-method
> ###   show,BIOMOD.projection.out-method
> 
> ### ** Examples
> 
> showClass("BIOMOD.projection.out")
Class "BIOMOD.projection.out" [package "biomod2"]

Slots:
                                                               
Name:         modeling.id          proj.name           dir.name
Class:          character          character          character
                                                               
Name:             sp.name     expl.var.names              coord
Class:          character          character         data.frame
                                                               
Name:        scale.models   models.projected         models.out
Class:            logical          character BIOMOD.stored.data
                                                               
Name:                type          data.type           proj.out
Class:          character          character BIOMOD.stored.data
                         
Name:                call
Class:                ANY
> 
> ## ----------------------------------------------------------------------- #
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> ## ----------------------------------------------------------------------- #
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }
> 
> 
> ## ----------------------------------------------------------------------- #
> # Project single models
> myBiomodProj <- BIOMOD_Projection(bm.mod = myBiomodModelOut,
+                                   proj.name = 'Current',
+                                   new.env = myExpl,
+                                   models.chosen = 'all',
+                                   metric.binary = 'all',
+                                   metric.filter = 'all',
+                                   build.clamping.mask = TRUE)

-=-=-=-=-=-=-=-=-=-=-=-=-= Do Single Models Projection -=-=-=-=-=-=-=-=-=-=-=-=-=

	> Building clamping mask

	> Projecting GuloGulo_allData_RUN1_RF ...
	> Projecting GuloGulo_allData_RUN1_GLM ...
	> Projecting GuloGulo_allData_RUN2_RF ...
	> Projecting GuloGulo_allData_RUN2_GLM ...
	> Projecting GuloGulo_allData_allRun_RF ...
	> Projecting GuloGulo_allData_allRun_GLM ...

	> Building TSS binaries / filtered
	> Building AUCroc binaries / filtered

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodProj

-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.projection.out -=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeled species (sp.name) : GuloGulo

Modeling id (modeling.id) : AllModels ( 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/GuloGulo.AllModels.models.out 
)

Explanatory variables (expl.var.names) : bio3 bio4 bio7 bio11 bio12

Projection directory (dir.name/sp.name/proj.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/Current


Projected models (models.projected) :  GuloGulo_allData_RUN1_RF 
GuloGulo_allData_RUN1_GLM GuloGulo_allData_RUN2_RF GuloGulo_allData_RUN2_GLM 
GuloGulo_allData_allRun_RF GuloGulo_allData_allRun_GLM

Available binary projection : TSS AUCroc

Available filtered projection : TSS AUCroc

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> plot(myBiomodProj)
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD.stored.data")
> ### * BIOMOD.stored.data
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD.stored.data
> ### Title: 'BIOMOD_Modeling' and 'BIOMOD_EnsembleModeling' output object
> ###   class
> ### Aliases: BIOMOD.stored.data BIOMOD.stored.data-class
> ###   BIOMOD.stored.data.frame-class BIOMOD.stored.SpatRaster-class
> ###   BIOMOD.stored.files-class BIOMOD.stored.formated.data-class
> ###   BIOMOD.stored.options-class BIOMOD.stored.models.out-class
> 
> ### ** Examples
> 
> 
> showClass("BIOMOD.stored.data")
Class "BIOMOD.stored.data" [package "biomod2"]

Slots:
                          
Name:   inMemory      link
Class:   logical character

Known Subclasses: "BIOMOD.stored.data.frame", "BIOMOD.stored.SpatRaster", "BIOMOD.stored.files", 
"BIOMOD.stored.formated.data", "BIOMOD.stored.options", 
"BIOMOD.stored.models.out"
> showClass("BIOMOD.stored.data.frame") 
Class "BIOMOD.stored.data.frame" [package "biomod2"]

Slots:
                                       
Name:         val   inMemory       link
Class: data.frame    logical  character

Extends: "BIOMOD.stored.data"
> showClass("BIOMOD.stored.SpatRaster") 
Class "BIOMOD.stored.SpatRaster" [package "biomod2"]

Slots:
                                                         
Name:               val         inMemory             link
Class: PackedSpatRaster          logical        character

Extends: "BIOMOD.stored.data"
> showClass("BIOMOD.stored.files") 
Class "BIOMOD.stored.files" [package "biomod2"]

Slots:
                                    
Name:        val  inMemory      link
Class: character   logical character

Extends: "BIOMOD.stored.data"
> showClass("BIOMOD.stored.formated.data") 
Class "BIOMOD.stored.formated.data" [package "biomod2"]

Slots:
                                                                     
Name:                   val             inMemory                 link
Class: BIOMOD.formated.data              logical            character

Extends: "BIOMOD.stored.data"
> showClass("BIOMOD.stored.options") 
Class "BIOMOD.stored.options" [package "biomod2"]

Slots:
                                                                        
Name:                    val              inMemory                  link
Class: BIOMOD.models.options               logical             character

Extends: "BIOMOD.stored.data"
> showClass("BIOMOD.stored.models.out") 
Class "BIOMOD.stored.models.out" [package "biomod2"]

Slots:
                                                            
Name:                val          inMemory              link
Class: BIOMOD.models.out           logical         character

Extends: "BIOMOD.stored.data"
> 
> 
> 
> 
> 
> cleanEx()
> nameEx("BIOMOD_EnsembleForecasting")
> ### * BIOMOD_EnsembleForecasting
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_EnsembleForecasting
> ### Title: Project ensemble species distribution models onto new
> ###   environment
> ### Aliases: BIOMOD_EnsembleForecasting
> ### Keywords: models projection
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
>  
> # --------------------------------------------------------------- #
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }
> 
> 
> file.proj <- paste0(myRespName, "/proj_Current/", myRespName, ".Current.projection.out")
> if (file.exists(file.proj)) {
+   myBiomodProj <- get(load(file.proj))
+ } else {
+ 
+   # Project single models
+   myBiomodProj <- BIOMOD_Projection(bm.mod = myBiomodModelOut,
+                                     proj.name = 'Current',
+                                     new.env = myExpl,
+                                     models.chosen = 'all',
+                                     build.clamping.mask = TRUE)
+ }
> 
> 
> file.EM <- paste0(myRespName, "/", myRespName, ".AllModels.ensemble.models.out")
> if (file.exists(file.EM)) {
+   myBiomodEM <- get(load(file.EM))
+ } else {
+ 
+   # Model ensemble models
+   myBiomodEM <- BIOMOD_EnsembleModeling(bm.mod = myBiomodModelOut,
+                                         models.chosen = 'all',
+                                         em.by = 'all',
+                                         em.algo = c('EMmean', 'EMca'),
+                                         metric.select = c('TSS'),
+                                         metric.select.thresh = c(0.7),
+                                         metric.eval = c('TSS', 'AUCroc'),
+                                         var.import = 3,
+                                         seed.val = 42)
+ }
> 
> 
> # --------------------------------------------------------------- #
> # Project ensemble models (from single projections)
> myBiomodEMProj <- BIOMOD_EnsembleForecasting(bm.em = myBiomodEM, 
+                                              bm.proj = myBiomodProj,
+                                              models.chosen = 'all',
+                                              metric.binary = 'all',
+                                              metric.filter = 'all')

-=-=-=-=-=-=-=-=-=-=-=-= Do Ensemble Models Projection -=-=-=-=-=-=-=-=-=-=-=-=

Creating suitable Workdir...

	> Projecting GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo ...
	> Projecting GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo ...

	> Building TSS binaries / filtered
	> Building AUCroc binaries / filtered

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> # Project ensemble models (building single projections)
> myBiomodEMProj <- BIOMOD_EnsembleForecasting(bm.em = myBiomodEM,
+                                              proj.name = 'CurrentEM',
+                                              new.env = myExpl,
+                                              models.chosen = 'all',
+                                              metric.binary = 'all',
+                                              metric.filter = 'all')

-=-=-=-=-=-=-=-=-=-=-=-= Do Ensemble Models Projection -=-=-=-=-=-=-=-=-=-=-=-=

Creating suitable Workdir...

-=-=-=-=-=-=-=-=-=-=-=-=-= Do Single Models Projection -=-=-=-=-=-=-=-=-=-=-=-=-=

	> Projecting GuloGulo_allData_RUN1_GLM ...
	> Projecting GuloGulo_allData_RUN2_GLM ...
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

	> Projecting GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo ...
	> Projecting GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo ...

	> Building TSS binaries / filtered
	> Building AUCroc binaries / filtered

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodEMProj

-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.projection.out -=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeled species (sp.name) : GuloGulo

Modeling id (modeling.id) : AllModels ( 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/GuloGulo.AllModels.ensemble.models.out 
)

Explanatory variables (expl.var.names) : bio3 bio4 bio7 bio11 bio12

Projection directory (dir.name/sp.name/proj.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/CurrentEM


Projected models (models.projected) :  
GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo 
GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo

Available binary projection : TSS AUCroc

Available filtered projection : TSS AUCroc

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> plot(myBiomodEMProj)
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD_EnsembleModeling")
> ### * BIOMOD_EnsembleModeling
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_EnsembleModeling
> ### Title: Create and evaluate an ensemble set of models and predictions
> ### Aliases: BIOMOD_EnsembleModeling
> ### Keywords: ensemble models weights
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> ## ----------------------------------------------------------------------- #
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }
> 
> ## ----------------------------------------------------------------------- #
> # Model ensemble models
> myBiomodEM <- BIOMOD_EnsembleModeling(bm.mod = myBiomodModelOut,
+                                       models.chosen = 'all',
+                                       em.by = 'all',
+                                       em.algo = c('EMmean', 'EMca'),
+                                       metric.select = c('TSS'),
+                                       metric.select.thresh = c(0.7),
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)

-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Ensemble Models -=-=-=-=-=-=-=-=-=-=-=-=-=-=

   ! all models available will be included in ensemble.modeling
  ! Ensemble Models will be filtered and/or weighted using validation dataset (if possible). Please use `metric.select.dataset` for alternative options.
   > Evaluation & Weighting methods summary :
      TSS over 0.7

!!! Removed models using the Full dataset as ensemble models cannot merge repetition dataset (RUN1, RUN2, ...) with Full dataset unless em.by = 'PA+run'.

  > mergedData_mergedRun_mergedAlgo ensemble modeling

   > Mean of probabilities by TSS ...
			Evaluating Model stuff...
			Evaluating Predictor Contributions... 

  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%


   > Committee averaging by TSS ...
			Evaluating Model stuff...
			Evaluating Predictor Contributions... 

  |                                                                              |                                                                      |   0%  |                                                                              |=====                                                                 |   7%  |                                                                              |=========                                                             |  13%  |                                                                              |==============                                                        |  20%  |                                                                              |===================                                                   |  27%  |                                                                              |=======================                                               |  33%  |                                                                              |============================                                          |  40%  |                                                                              |=================================                                     |  47%  |                                                                              |=====================================                                 |  53%  |                                                                              |==========================================                            |  60%  |                                                                              |===============================================                       |  67%  |                                                                              |===================================================                   |  73%  |                                                                              |========================================================              |  80%  |                                                                              |=============================================================         |  87%  |                                                                              |=================================================================     |  93%  |                                                                              |======================================================================| 100%

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodEM

-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.ensemble.models.out -=-=-=-=-=-=-=-=-=-=-=-=-=

Modeled species (sp.name) : GuloGulo

Modeling id (modeling.id) : AllModels ( 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/GuloGulo.AllModels.models.out 
)

Explanatory variables (expl.var.names) : bio3 bio4 bio7 bio11 bio12


Computed models (em.computed) :  
GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo 
GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo

Failed models (em.failed) :  none

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> # Get evaluation scores & variables importance
> get_evaluations(myBiomodEM)
                                             full.name merged.by.PA
1 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
2 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
3   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
4   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
  merged.by.run merged.by.algo filtered.by   algo metric.eval cutoff
1     mergedRun     mergedAlgo         TSS EMmean         TSS  563.0
2     mergedRun     mergedAlgo         TSS EMmean      AUCroc  567.5
3     mergedRun     mergedAlgo         TSS   EMca         TSS  505.0
4     mergedRun     mergedAlgo         TSS   EMca      AUCroc  500.0
  sensitivity specificity calibration validation evaluation
1         100         100           1         NA         NA
2         100         100           1         NA         NA
3         100         100           1         NA         NA
4         100         100           1         NA         NA
> get_variables_importance(myBiomodEM)
                                              full.name merged.by.PA
1  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
2  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
3  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
4  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
5  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
6  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
7  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
8  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
9  GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
10 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
11 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
12 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
13 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
14 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
15 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
16   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
17   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
18   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
19   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
20   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
21   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
22   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
23   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
24   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
25   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
26   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
27   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
28   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
29   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
30   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
   merged.by.run merged.by.algo filtered.by   algo expl.var rand  var.imp
1      mergedRun     mergedAlgo         TSS EMmean     bio3    1 0.140097
2      mergedRun     mergedAlgo         TSS EMmean     bio4    1 0.297245
3      mergedRun     mergedAlgo         TSS EMmean     bio7    1 0.747721
4      mergedRun     mergedAlgo         TSS EMmean    bio11    1 0.750851
5      mergedRun     mergedAlgo         TSS EMmean    bio12    1 0.176800
6      mergedRun     mergedAlgo         TSS EMmean     bio3    2 0.206415
7      mergedRun     mergedAlgo         TSS EMmean     bio4    2 0.326488
8      mergedRun     mergedAlgo         TSS EMmean     bio7    2 0.524373
9      mergedRun     mergedAlgo         TSS EMmean    bio11    2 0.721234
10     mergedRun     mergedAlgo         TSS EMmean    bio12    2 0.145526
11     mergedRun     mergedAlgo         TSS EMmean     bio3    3 0.183861
12     mergedRun     mergedAlgo         TSS EMmean     bio4    3 0.372330
13     mergedRun     mergedAlgo         TSS EMmean     bio7    3 0.791212
14     mergedRun     mergedAlgo         TSS EMmean    bio11    3 1.000000
15     mergedRun     mergedAlgo         TSS EMmean    bio12    3 0.120636
16     mergedRun     mergedAlgo         TSS   EMca     bio3    1 0.153695
17     mergedRun     mergedAlgo         TSS   EMca     bio4    1 0.313201
18     mergedRun     mergedAlgo         TSS   EMca     bio7    1 0.627149
19     mergedRun     mergedAlgo         TSS   EMca    bio11    1 1.000000
20     mergedRun     mergedAlgo         TSS   EMca    bio12    1 0.112939
21     mergedRun     mergedAlgo         TSS   EMca     bio3    2 0.096734
22     mergedRun     mergedAlgo         TSS   EMca     bio4    2 0.426778
23     mergedRun     mergedAlgo         TSS   EMca     bio7    2 0.525343
24     mergedRun     mergedAlgo         TSS   EMca    bio11    2 0.848338
25     mergedRun     mergedAlgo         TSS   EMca    bio12    2 0.105085
26     mergedRun     mergedAlgo         TSS   EMca     bio3    3 0.187093
27     mergedRun     mergedAlgo         TSS   EMca     bio4    3 0.384509
28     mergedRun     mergedAlgo         TSS   EMca     bio7    3 0.633883
29     mergedRun     mergedAlgo         TSS   EMca    bio11    3 0.868944
30     mergedRun     mergedAlgo         TSS   EMca    bio12    3 0.109227
> 
> # Represent evaluation scores
> bm_PlotEvalMean(bm.out = myBiomodEM, dataset = 'calibration')
Warning in .bm_PlotEvalMean.check.args(bm.out, metric.eval, dataset, group.by,  :
  AUCroc, TSS evaluation metric.eval automatically selected
`height` was translated to `width`.
$tab
    name mean1 mean2 sd1 sd2
1   EMca     1     1  NA  NA
2 EMmean     1     1  NA  NA

$plot
`height` was translated to `width`.

> bm_PlotEvalBoxplot(bm.out = myBiomodEM, group.by = c('algo', 'algo'))
$tab
                                             full.name merged.by.PA
1 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
2 GuloGulo_EMmeanByTSS_mergedData_mergedRun_mergedAlgo   mergedData
3   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
4   GuloGulo_EMcaByTSS_mergedData_mergedRun_mergedAlgo   mergedData
  merged.by.run merged.by.algo filtered.by   algo metric.eval cutoff
1     mergedRun     mergedAlgo         TSS EMmean         TSS  563.0
2     mergedRun     mergedAlgo         TSS EMmean      AUCroc  567.5
3     mergedRun     mergedAlgo         TSS   EMca         TSS  505.0
4     mergedRun     mergedAlgo         TSS   EMca      AUCroc  500.0
  sensitivity specificity calibration validation evaluation
1         100         100           1         NA         NA
2         100         100           1         NA         NA
3         100         100           1         NA         NA
4         100         100           1         NA         NA

$plot

> 
> # # Represent variables importance
> # bm_PlotVarImpBoxplot(bm.out = myBiomodEM, group.by = c('expl.var', 'algo', 'algo'))
> # bm_PlotVarImpBoxplot(bm.out = myBiomodEM, group.by = c('expl.var', 'algo', 'merged.by.PA'))
> # bm_PlotVarImpBoxplot(bm.out = myBiomodEM, group.by = c('algo', 'expl.var', 'merged.by.PA'))
> 
> # # Represent response curves
> # bm_PlotResponseCurves(bm.out = myBiomodEM, 
> #                       models.chosen = get_built_models(myBiomodEM),
> #                       fixed.var = 'median')
> # bm_PlotResponseCurves(bm.out = myBiomodEM, 
> #                       models.chosen = get_built_models(myBiomodEM),
> #                       fixed.var = 'min')
> # bm_PlotResponseCurves(bm.out = myBiomodEM, 
> #                       models.chosen = get_built_models(myBiomodEM, algo = 'EMmean'),
> #                       fixed.var = 'median',
> #                       do.bivariate = TRUE)
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD_FormatingData")
> ### * BIOMOD_FormatingData
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_FormatingData
> ### Title: Format input data, and select pseudo-absences if wanted, for
> ###   usage in 'biomod2'
> ### Aliases: BIOMOD_FormatingData
> ### Keywords: dataset evaluation format pseudo-absence
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> # ---------------------------------------------------------------#
> # Format Data with true absences
> myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                      resp.var = myResp,
+                                      resp.xy = myRespXY,
+                                      expl.var = myExpl)

-=-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Data Formating -=-=-=-=-=-=-=-=-=-=-=-=-=-=

 !!! Some data are located in the same raster cell. 
          Please set `filter.raster = TRUE` if you want an automatic filtering.
 ! Some NAs have been automatically removed from your data
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodData

-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.formated.data -=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeling directory (dir.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck

Modeled species (sp.name) : GuloGulo

	 22 presences,  49 true absences and  0 undefined points in dataset


	 5 explanatory variables

      bio3            bio4           bio7           bio11         
 Min.   :21.36   Min.   :4393   Min.   :168.9   Min.   :-132.389  
 1st Qu.:24.33   1st Qu.:6214   1st Qu.:247.9   1st Qu.: -61.092  
 Median :26.03   Median :7351   Median :283.4   Median : -26.944  
 Mean   :27.12   Mean   :7272   Mean   :282.9   Mean   : -33.647  
 3rd Qu.:30.10   3rd Qu.:8314   3rd Qu.:316.9   3rd Qu.:  -5.129  
 Max.   :39.17   Max.   :9895   Max.   :377.1   Max.   :  38.714  
     bio12       
 Min.   : 485.3  
 1st Qu.: 605.2  
 Median : 668.3  
 Mean   : 782.1  
 3rd Qu.: 816.5  
 Max.   :2243.9  

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> summary(myBiomodData)
  dataset run PA Presences True_Absences Pseudo_Absences Undefined
1 initial  NA NA        22            49               0         0
> plot(myBiomodData)

  ! Calibration/Validation data is missing, plot.valid set to FALSE
  ! Evaluation data is missing, plot.eval set to FALSE$data.vect
 class       : SpatVector 
 geometry    : points 
 dimensions  : 71, 3  (geometries, attributes)
 extent      : 1.5, 28.5, 46.00001, 67.00001  (xmin, xmax, ymin, ymax)
 coord. ref. :  
 names       :  resp         dataset    part
 type        : <num>           <chr>   <chr>
 values      :    20 Initial dataset Initial
                  10 Initial dataset Initial
                  10 Initial dataset Initial

$data.label
                              9                              10 
                "**Presences**"       "Presences (calibration)" 
                             11                              12 
       "Presences (validation)"        "Presences (evaluation)" 
                             19                              20 
            "**True Absences**"   "True Absences (calibration)" 
                             21                              22 
   "True Absences (validation)"    "True Absences (evaluation)" 
                             29                              30 
          "**Pseudo-Absences**" "Pseudo-Absences (calibration)" 
                             31                               1 
 "Pseudo-Absences (validation)"                    "Background" 

$data.plot

> 
> 
> # ---------------------------------------------------------------#
> # # Transform true absences into potential pseudo-absences
> # myResp.PA <- ifelse(myResp == 1, 1, NA)
> # 
> # # Format Data with pseudo-absences : random method
> # myBiomodData.r <- BIOMOD_FormatingData(resp.name = myRespName,
> #                                        resp.var = myResp.PA,
> #                                        resp.xy = myRespXY,
> #                                        expl.var = myExpl,
> #                                        PA.nb.rep = 4,
> #                                        PA.nb.absences = 1000,
> #                                        PA.strategy = 'random')
> # 
> # # Format Data with pseudo-absences : disk method
> # myBiomodData.d <- BIOMOD_FormatingData(resp.name = myRespName,
> #                                        resp.var = myResp.PA,
> #                                        resp.xy = myRespXY,
> #                                        expl.var = myExpl,
> #                                        PA.nb.rep = 4,
> #                                        PA.nb.absences = 500,
> #                                        PA.strategy = 'disk',
> #                                        PA.dist.min = 5,
> #                                        PA.dist.max = 35)
> # 
> # # Format Data with pseudo-absences : SRE method
> # myBiomodData.s <- BIOMOD_FormatingData(resp.name = myRespName,
> #                                        resp.var = myResp.PA,
> #                                        resp.xy = myRespXY,
> #                                        expl.var = myExpl,
> #                                        PA.nb.rep = 4,
> #                                        PA.nb.absences = 1000,
> #                                        PA.strategy = 'sre',
> #                                        PA.sre.quant = 0.025)
> # 
> # # Format Data with pseudo-absences : user.defined method
> # myPAtable <- data.frame(PA1 = ifelse(myResp == 1, TRUE, FALSE),
> #                         PA2 = ifelse(myResp == 1, TRUE, FALSE))
> # for (i in 1:ncol(myPAtable)) myPAtable[sample(which(myPAtable[, i] == FALSE), 500), i] = TRUE
> # myBiomodData.u <- BIOMOD_FormatingData(resp.name = myRespName,
> #                                        resp.var = myResp.PA,
> #                                        resp.xy = myRespXY,
> #                                        expl.var = myExpl,
> #                                        PA.strategy = 'user.defined',
> #                                        PA.user.table = myPAtable)
> # 
> # myBiomodData.r
> # myBiomodData.d
> # myBiomodData.s
> # myBiomodData.u
> # plot(myBiomodData.r)
> # plot(myBiomodData.d)
> # plot(myBiomodData.s)
> # plot(myBiomodData.u)
> 
> 
> # ---------------------------------------------------------------#
> # # Select multiple sets of pseudo-absences
> #
> # # Transform true absences into potential pseudo-absences
> # myResp.PA <- ifelse(myResp == 1, 1, NA)
> # 
> # # Format Data with pseudo-absences : random method
> # myBiomodData.multi <- BIOMOD_FormatingData(resp.name = myRespName,
> #                                            resp.var = myResp.PA,
> #                                            resp.xy = myRespXY,
> #                                            expl.var = myExpl,
> #                                            PA.nb.rep = 4,
> #                                            PA.nb.absences = c(1000, 500, 500, 200),
> #                                            PA.strategy = 'random')
> # myBiomodData.multi
> # summary(myBiomodData.multi)
> # plot(myBiomodData.multi)
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD_LoadModels")
> ### * BIOMOD_LoadModels
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_LoadModels
> ### Title: Load species distribution models built with 'biomod2'
> ### Aliases: BIOMOD_LoadModels
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> # ---------------------------------------------------------------
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS','AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }
> 
> 
> # ---------------------------------------------------------------
> # Loading some models built
> BIOMOD_LoadModels(bm.out = myBiomodModelOut, algo = 'RF')
[1] "GuloGulo_allData_RUN1_RF"   "GuloGulo_allData_RUN2_RF"  
[3] "GuloGulo_allData_allRun_RF"
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD_Modeling")
> ### * BIOMOD_Modeling
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_Modeling
> ### Title: Run a range of species distribution models
> ### Aliases: BIOMOD_Modeling
> ### Keywords: models multivariate nonlinear nonparametric regression tree
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> # ---------------------------------------------------------------------------- #
> # Format Data with true absences
> myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                      resp.var = myResp,
+                                      resp.xy = myRespXY,
+                                      expl.var = myExpl)

-=-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Data Formating -=-=-=-=-=-=-=-=-=-=-=-=-=-=

 !!! Some data are located in the same raster cell. 
          Please set `filter.raster = TRUE` if you want an automatic filtering.
 ! Some NAs have been automatically removed from your data
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> 
> # ---------------------------------------------------------------------------- #
> # Model single models
> myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                     modeling.id = 'AllModels',
+                                     models = c('RF', 'GLM'),
+                                     CV.strategy = 'random',
+                                     CV.nb.rep = 2,
+                                     CV.perc = 0.8,
+                                     OPT.strategy = 'bigboss',
+                                     metric.eval = c('TSS','AUCroc'),
+                                     var.import = 2,
+                                     seed.val = 42)

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Single Models -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


Checking Models arguments...

	> Automatic weights creation to rise a 0.5 prevalence
Creating suitable Workdir...


Checking Cross-Validation arguments...

   > Random cross-validation selection

-=-=-=-=-=-=-=-=-=-=-=-=-=-= Build Modeling Options -=-=-=-=-=-=-=-=-=-=-=-=-=-=

	>  RF options ( datatype: binary , package: randomForest , function: randomForest )...
	>  GLM options ( datatype: binary , package: stats , function: glm )...

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=



-=-=-=-=-=-=-=-=-=-=-=-=-= GuloGulo Modeling Summary -=-=-=-=-=-=-=-=-=-=-=-=-=

> 5 environmental variables ( bio3 bio4 bio7 bio11 bio12 )

> Number of calibration/validation splits : 2
 CV.do.full.models activated: + 1 models

> Algorithms selected : RF GLM
 3 models for each algorithm

Total number of model runs: 6 

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


-=-=-=--=-=-=- GuloGulo_allData_RUN1_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20%  |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50%  |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN1_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20%  |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50%  |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN2_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20%  |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50%  |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_RUN2_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20%  |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50%  |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_allRun_RF 

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20%  |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50%  |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%



-=-=-=--=-=-=- GuloGulo_allData_allRun_GLM 
Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

	Evaluating Model stuff...
	Evaluating Predictor Contributions...
  |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20%  |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50%  |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> myBiomodModelOut

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.models.out -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeling directory (dir.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck

Modeled species (sp.name) : GuloGulo

Modeling id (modeling.id) : AllModels

Explanatory variables (expl.var.names) : bio3 bio4 bio7 bio11 bio12


Computed models (models.computed) :  GuloGulo_allData_RUN1_RF 
GuloGulo_allData_RUN1_GLM GuloGulo_allData_RUN2_RF GuloGulo_allData_RUN2_GLM 
GuloGulo_allData_allRun_RF GuloGulo_allData_allRun_GLM

Failed models (models.failed) :  none

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> # Get evaluation scores & variables importance
> get_evaluations(myBiomodModelOut)
                     full.name      PA    run algo metric.eval cutoff
1     GuloGulo_allData_RUN1_RF allData   RUN1   RF         TSS    481
2     GuloGulo_allData_RUN1_RF allData   RUN1   RF      AUCroc    482
3    GuloGulo_allData_RUN1_GLM allData   RUN1  GLM         TSS    505
4    GuloGulo_allData_RUN1_GLM allData   RUN1  GLM      AUCroc    500
5     GuloGulo_allData_RUN2_RF allData   RUN2   RF         TSS    312
6     GuloGulo_allData_RUN2_RF allData   RUN2   RF      AUCroc    313
7    GuloGulo_allData_RUN2_GLM allData   RUN2  GLM         TSS    505
8    GuloGulo_allData_RUN2_GLM allData   RUN2  GLM      AUCroc    500
9   GuloGulo_allData_allRun_RF allData allRun   RF         TSS    464
10  GuloGulo_allData_allRun_RF allData allRun   RF      AUCroc    464
11 GuloGulo_allData_allRun_GLM allData allRun  GLM         TSS    505
12 GuloGulo_allData_allRun_GLM allData allRun  GLM      AUCroc    500
   sensitivity specificity calibration validation evaluation
1          100     100.000       1.000      0.750         NA
2          100     100.000       1.000      0.975         NA
3          100     100.000       1.000      1.000         NA
4          100     100.000       1.000      1.000         NA
5          100      97.436       0.974      0.400         NA
6          100      97.436       0.997      0.950         NA
7          100     100.000       1.000      0.750         NA
8          100     100.000       1.000      1.000         NA
9          100     100.000       1.000         NA         NA
10         100     100.000       1.000         NA         NA
11         100     100.000       1.000         NA         NA
12         100     100.000       1.000         NA         NA
> get_variables_importance(myBiomodModelOut)
                     full.name      PA    run algo expl.var rand  var.imp
1     GuloGulo_allData_RUN1_RF allData   RUN1   RF     bio3    1 0.196945
2     GuloGulo_allData_RUN1_RF allData   RUN1   RF     bio4    1 0.059486
3     GuloGulo_allData_RUN1_RF allData   RUN1   RF     bio7    1 0.067732
4     GuloGulo_allData_RUN1_RF allData   RUN1   RF    bio11    1 0.544066
5     GuloGulo_allData_RUN1_RF allData   RUN1   RF    bio12    1 0.146125
6     GuloGulo_allData_RUN1_RF allData   RUN1   RF     bio3    2 0.086512
7     GuloGulo_allData_RUN1_RF allData   RUN1   RF     bio4    2 0.082796
8     GuloGulo_allData_RUN1_RF allData   RUN1   RF     bio7    2 0.066888
9     GuloGulo_allData_RUN1_RF allData   RUN1   RF    bio11    2 0.504064
10    GuloGulo_allData_RUN1_RF allData   RUN1   RF    bio12    2 0.161786
11   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM     bio3    1 0.393598
12   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM     bio4    1 0.582130
13   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM     bio7    1 1.000000
14   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM    bio11    1 0.974753
15   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM    bio12    1 0.070202
16   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM     bio3    2 0.571315
17   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM     bio4    2 0.609724
18   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM     bio7    2 0.948848
19   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM    bio11    2 1.000000
20   GuloGulo_allData_RUN1_GLM allData   RUN1  GLM    bio12    2 0.129956
21    GuloGulo_allData_RUN2_RF allData   RUN2   RF     bio3    1 0.079598
22    GuloGulo_allData_RUN2_RF allData   RUN2   RF     bio4    1 0.104577
23    GuloGulo_allData_RUN2_RF allData   RUN2   RF     bio7    1 0.104663
24    GuloGulo_allData_RUN2_RF allData   RUN2   RF    bio11    1 0.556900
25    GuloGulo_allData_RUN2_RF allData   RUN2   RF    bio12    1 0.130574
26    GuloGulo_allData_RUN2_RF allData   RUN2   RF     bio3    2 0.126880
27    GuloGulo_allData_RUN2_RF allData   RUN2   RF     bio4    2 0.064488
28    GuloGulo_allData_RUN2_RF allData   RUN2   RF     bio7    2 0.118015
29    GuloGulo_allData_RUN2_RF allData   RUN2   RF    bio11    2 0.423549
30    GuloGulo_allData_RUN2_RF allData   RUN2   RF    bio12    2 0.133292
31   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM     bio3    1 0.178479
32   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM     bio4    1 0.783367
33   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM     bio7    1 0.889489
34   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM    bio11    1 0.948849
35   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM    bio12    1 0.142309
36   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM     bio3    2 0.274170
37   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM     bio4    2 0.706216
38   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM     bio7    2 1.000000
39   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM    bio11    2 1.000000
40   GuloGulo_allData_RUN2_GLM allData   RUN2  GLM    bio12    2 0.104700
41  GuloGulo_allData_allRun_RF allData allRun   RF     bio3    1 0.135097
42  GuloGulo_allData_allRun_RF allData allRun   RF     bio4    1 0.075373
43  GuloGulo_allData_allRun_RF allData allRun   RF     bio7    1 0.148812
44  GuloGulo_allData_allRun_RF allData allRun   RF    bio11    1 0.320302
45  GuloGulo_allData_allRun_RF allData allRun   RF    bio12    1 0.142295
46  GuloGulo_allData_allRun_RF allData allRun   RF     bio3    2 0.093332
47  GuloGulo_allData_allRun_RF allData allRun   RF     bio4    2 0.062034
48  GuloGulo_allData_allRun_RF allData allRun   RF     bio7    2 0.148270
49  GuloGulo_allData_allRun_RF allData allRun   RF    bio11    2 0.599398
50  GuloGulo_allData_allRun_RF allData allRun   RF    bio12    2 0.151248
51 GuloGulo_allData_allRun_GLM allData allRun  GLM     bio3    1 0.476995
52 GuloGulo_allData_allRun_GLM allData allRun  GLM     bio4    1 0.698494
53 GuloGulo_allData_allRun_GLM allData allRun  GLM     bio7    1 0.957484
54 GuloGulo_allData_allRun_GLM allData allRun  GLM    bio11    1 0.947670
55 GuloGulo_allData_allRun_GLM allData allRun  GLM    bio12    1 0.135463
56 GuloGulo_allData_allRun_GLM allData allRun  GLM     bio3    2 0.588396
57 GuloGulo_allData_allRun_GLM allData allRun  GLM     bio4    2 0.736051
58 GuloGulo_allData_allRun_GLM allData allRun  GLM     bio7    2 1.000000
59 GuloGulo_allData_allRun_GLM allData allRun  GLM    bio11    2 0.737492
60 GuloGulo_allData_allRun_GLM allData allRun  GLM    bio12    2 0.137826
> 
> # Represent evaluation scores 
> bm_PlotEvalMean(bm.out = myBiomodModelOut, dataset = 'calibration')
Warning in .bm_PlotEvalMean.check.args(bm.out, metric.eval, dataset, group.by,  :
  AUCroc, TSS evaluation metric.eval automatically selected
`height` was translated to `width`.
$tab
  name mean1     mean2         sd1        sd2
1  GLM 1.000 1.0000000 0.000000000 0.00000000
2   RF 0.999 0.9913333 0.001732051 0.01501111

$plot
`height` was translated to `width`.

> bm_PlotEvalMean(bm.out = myBiomodModelOut, dataset = 'validation')
Warning in .bm_PlotEvalMean.check.args(bm.out, metric.eval, dataset, group.by,  :
  AUCroc, TSS evaluation metric.eval automatically selected
`height` was translated to `width`.
$tab
  name  mean1 mean2        sd1       sd2
1  GLM 1.0000 0.875 0.00000000 0.1767767
2   RF 0.9625 0.575 0.01767767 0.2474874

$plot
`height` was translated to `width`.

> bm_PlotEvalBoxplot(bm.out = myBiomodModelOut, group.by = c('algo', 'run'))
$tab
                     full.name      PA    run algo metric.eval cutoff
1     GuloGulo_allData_RUN1_RF allData   RUN1   RF         TSS    481
2     GuloGulo_allData_RUN1_RF allData   RUN1   RF      AUCroc    482
3    GuloGulo_allData_RUN1_GLM allData   RUN1  GLM         TSS    505
4    GuloGulo_allData_RUN1_GLM allData   RUN1  GLM      AUCroc    500
5     GuloGulo_allData_RUN2_RF allData   RUN2   RF         TSS    312
6     GuloGulo_allData_RUN2_RF allData   RUN2   RF      AUCroc    313
7    GuloGulo_allData_RUN2_GLM allData   RUN2  GLM         TSS    505
8    GuloGulo_allData_RUN2_GLM allData   RUN2  GLM      AUCroc    500
9   GuloGulo_allData_allRun_RF allData allRun   RF         TSS    464
10  GuloGulo_allData_allRun_RF allData allRun   RF      AUCroc    464
11 GuloGulo_allData_allRun_GLM allData allRun  GLM         TSS    505
12 GuloGulo_allData_allRun_GLM allData allRun  GLM      AUCroc    500
   sensitivity specificity calibration validation evaluation
1          100     100.000       1.000      0.750         NA
2          100     100.000       1.000      0.975         NA
3          100     100.000       1.000      1.000         NA
4          100     100.000       1.000      1.000         NA
5          100      97.436       0.974      0.400         NA
6          100      97.436       0.997      0.950         NA
7          100     100.000       1.000      0.750         NA
8          100     100.000       1.000      1.000         NA
9          100     100.000       1.000         NA         NA
10         100     100.000       1.000         NA         NA
11         100     100.000       1.000         NA         NA
12         100     100.000       1.000         NA         NA

$plot

> 
> # # Represent variables importance 
> # bm_PlotVarImpBoxplot(bm.out = myBiomodModelOut, group.by = c('expl.var', 'algo', 'algo'))
> # bm_PlotVarImpBoxplot(bm.out = myBiomodModelOut, group.by = c('expl.var', 'algo', 'run'))
> # bm_PlotVarImpBoxplot(bm.out = myBiomodModelOut, group.by = c('algo', 'expl.var', 'run'))
> 
> # # Represent response curves 
> # mods <- get_built_models(myBiomodModelOut, run = 'RUN1')
> # bm_PlotResponseCurves(bm.out = myBiomodModelOut, 
> #                       models.chosen = mods,
> #                       fixed.var = 'median')
> # bm_PlotResponseCurves(bm.out = myBiomodModelOut, 
> #                       models.chosen = mods,
> #                       fixed.var = 'min')
> # mods <- get_built_models(myBiomodModelOut, full.name = 'GuloGulo_allData_RUN2_RF')
> # bm_PlotResponseCurves(bm.out = myBiomodModelOut, 
> #                       models.chosen = mods,
> #                       fixed.var = 'median',
> #                       do.bivariate = TRUE)
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD_Projection")
> ### * BIOMOD_Projection
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_Projection
> ### Title: Project a range of calibrated species distribution models onto
> ###   new environment
> ### Aliases: BIOMOD_Projection
> ### Keywords: models projection
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> # ---------------------------------------------------------------#
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS','AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }
> 
> 
> # ---------------------------------------------------------------#
> # Project single models
> file.proj <- paste0(myRespName, "/proj_Current/", myRespName, ".Current.projection.out")
> if (file.exists(file.proj)) {
+   myBiomodProj <- get(load(file.proj))
+ } else {
+ myBiomodProj <- BIOMOD_Projection(bm.mod = myBiomodModelOut,
+                                   proj.name = 'Current',
+                                   new.env = myExpl,
+                                   models.chosen = 'all')
+ }
> myBiomodProj

-=-=-=-=-=-=-=-=-=-=-=-=-=-= BIOMOD.projection.out -=-=-=-=-=-=-=-=-=-=-=-=-=-=

Modeled species (sp.name) : GuloGulo

Modeling id (modeling.id) : AllModels ( 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/GuloGulo.AllModels.models.out 
)

Explanatory variables (expl.var.names) : bio3 bio4 bio7 bio11 bio12

Projection directory (dir.name/sp.name/proj.name) : 
/var/scratch2/tomas/cran/rlibro/check/biomod2.Rcheck/GuloGulo/Current


Projected models (models.projected) :  GuloGulo_allData_RUN1_RF 
GuloGulo_allData_RUN1_GLM GuloGulo_allData_RUN2_RF GuloGulo_allData_RUN2_GLM 
GuloGulo_allData_allRun_RF GuloGulo_allData_allRun_GLM

Available binary projection : TSS AUCroc

Available filtered projection : TSS AUCroc

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> plot(myBiomodProj)
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD_RangeSize")
> ### * BIOMOD_RangeSize
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_RangeSize
> ### Title: Analyze the range size differences between projections of
> ###   species distribution models
> ### Aliases: BIOMOD_RangeSize
> ### Keywords: "species change" gain loss projections range
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
> # --------------------------------------------------------------- #
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }
> 
> models.proj <- get_built_models(myBiomodModelOut, algo = "RF")
>   # Project single models
>   myBiomodProj <- BIOMOD_Projection(bm.mod = myBiomodModelOut,
+                                     proj.name = 'CurrentRangeSize',
+                                     new.env = myExpl,
+                                     models.chosen = models.proj,
+                                     metric.binary = 'all',
+                                     build.clamping.mask = TRUE)

-=-=-=-=-=-=-=-=-=-=-=-=-= Do Single Models Projection -=-=-=-=-=-=-=-=-=-=-=-=-=

	> Building clamping mask

	> Projecting GuloGulo_allData_RUN1_RF ...
	> Projecting GuloGulo_allData_RUN2_RF ...
	> Projecting GuloGulo_allData_allRun_RF ...

	> Building TSS binaries / filtered
	> Building AUCroc binaries / filtered

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> 
> # --------------------------------------------------------------- #
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_future)
> myExplFuture <- terra::rast(bioclim_future)
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExplFuture <- terra::crop(myExplFuture, myExtent)
> ## End(Don't show)
> # Project onto future conditions
> myBiomodProjectionFuture <- BIOMOD_Projection(bm.mod = myBiomodModelOut,
+                                               proj.name = 'FutureRangeSize',
+                                               new.env = myExplFuture,
+                                               models.chosen = models.proj,
+                                               metric.binary = 'TSS')

-=-=-=-=-=-=-=-=-=-=-=-=-= Do Single Models Projection -=-=-=-=-=-=-=-=-=-=-=-=-=

	> Building clamping mask

	> Projecting GuloGulo_allData_RUN1_RF ...
	> Projecting GuloGulo_allData_RUN2_RF ...
	> Projecting GuloGulo_allData_allRun_RF ...

	> Building TSS binaries / filtered

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
>                                               
> # Compute differences
> myBiomodRangeSize <- BIOMOD_RangeSize(proj.current = myBiomodProj,
+                                       proj.future = myBiomodProjectionFuture,
+                                       metric.binary = "TSS")

-=-=-=-=-=-=-=-=-=-=-=-=-= Do Range Size Computation -=-=-=-=-=-=-=-=-=-=-=-=-=

 Each projection in 'proj.current' will be compared once with its corresponding projection in 'proj.future'. 
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Done -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> 
> 
> # Represent main results
> bm_PlotRangeSize(bm.range = myBiomodRangeSize)
Warning in bm_PlotRangeSize(bm.range = myBiomodRangeSize) :
  Please check that rownames(bm.range$Compt.By.Models) match 'row.names' argument :
	GuloGulo : Species
	allData : Dataset
	RUN1 : Run
	RF : Algo
NULL
[1] "plot(ggdat,\n                        col = data.frame(\n                          value = c(-2, -1, 0, 1),\n                          color = c(\"#fc8d62\", \"lightgoldenrod2\", \"grey\", \"#66c2a5\")),\n                        colNA = \"white\")"
> 
> 
> 
> 
> 
> 
> cleanEx()

detaching ‘package:terra’

> nameEx("BIOMOD_Report")
> ### * BIOMOD_Report
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: BIOMOD_Report
> ### Title: Produce summary outputs from a simulation folder
> ### Aliases: BIOMOD_Report
> ### Keywords: ODMAP html markdown report
> 
> ### ** Examples
> 
> library(terra)
terra 1.8.93

Attaching package: ‘terra’

The following object is masked from ‘package:plotrix’:

    rescale

> 
> # Load species occurrences (6 species available)
> data(DataSpecies)
> head(DataSpecies)
  X_WGS84  Y_WGS84 ConnochaetesGnou GuloGulo PantheraOnca PteropusGiganteus
1   -94.5 82.00001                0        0            0                 0
2   -91.5 82.00001                0        1            0                 0
3   -88.5 82.00001                0        1            0                 0
4   -85.5 82.00001                0        1            0                 0
5   -82.5 82.00001                0        1            0                 0
6   -79.5 82.00001                0        1            0                 0
  TenrecEcaudatus VulpesVulpes
1               0            0
2               0            0
3               0            0
4               0            0
5               0            0
6               0            0
> 
> # Select the name of the studied species
> myRespName <- 'GuloGulo'
> 
> # Get corresponding presence/absence data
> myResp <- as.numeric(DataSpecies[, myRespName])
> 
> # Get corresponding XY coordinates
> myRespXY <- DataSpecies[, c('X_WGS84', 'Y_WGS84')]
> 
> # Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 & bio_12)
> data(bioclim_current)
> myExpl <- terra::rast(bioclim_current)
> 
> ## Don't show: 
> myExtent <- terra::ext(0,30,45,70)
> myExpl <- terra::crop(myExpl, myExtent)
> ## End(Don't show)
> 
>  
> # --------------------------------------------------------------- #
> file.out <- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
> if (file.exists(file.out)) {
+   myBiomodModelOut <- get(load(file.out))
+ } else {
+ 
+   # Format Data with true absences
+   myBiomodData <- BIOMOD_FormatingData(resp.name = myRespName,
+                                        resp.var = myResp,
+                                        resp.xy = myRespXY,
+                                        expl.var = myExpl)
+ 
+   # Model single models
+   myBiomodModelOut <- BIOMOD_Modeling(bm.format = myBiomodData,
+                                       modeling.id = 'AllModels',
+                                       models = c('RF', 'GLM'),
+                                       CV.strategy = 'random',
+                                       CV.nb.rep = 2,
+                                       CV.perc = 0.8,
+                                       OPT.strategy = 'bigboss',
+                                       metric.eval = c('TSS', 'AUCroc'),
+                                       var.import = 3,
+                                       seed.val = 42)
+ }
> 
> 
> file.proj <- paste0(myRespName, "/proj_Current/", myRespName, ".Current.projection.out")
> if (file.exists(file.proj)) {
+   myBiomodProj <- get(load(file.proj))
+ } else {
+ 
+   # Project single models
+   myBiomodProj <- BIOMOD_Projection(bm.mod = myBiomodModelOut,
+                                     proj.name = 'Current',
+                                     new.env = myExpl,
+                                     models.chosen = 'all',
+                                     build.clamping.mask = TRUE)
+ }
> 
> 
> file.EM <- paste0(myRespName, "/", myRespName, ".AllModels.ensemble.models.out")
> if (file.exists(file.EM)) {
+   myBiomodEM <- get(load(file.EM))
+ } else {
+ 
+   # Model ensemble models
+   myBiomodEM <- BIOMOD_EnsembleModeling(bm.mod = myBiomodModelOut,
+                                         models.chosen = 'all',
+                                         em.by = 'all',
+                                         em.algo = c('EMmean', 'EMca'),
+                                         metric.select = c('TSS'),
+                                         metric.select.thresh = c(0.7),
+                                         metric.eval = c('TSS', 'AUCroc'),
+                                         var.import = 3,
+                                         seed.val = 42)
+ }
> 
> 
> # --------------------------------------------------------------- #
> # Compile summary reports
> # BIOMOD_Report(bm.out = myBiomodModelOut, strategy = 'report')
> # BIOMOD_Report(bm.out = myBiomodProj, strategy = 'report')
> # BIOMOD_Report(bm.out = myBiomodEM, strategy = 'report')
>  
> BIOMOD_Report(bm.out = myBiomodModelOut, strategy = 'ODMAP')

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Do biomod2 Report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

	> Getting modeling files...
	> Building report...

processing file: biomod2_template_ODMAP.Rmd
Warning in file(con, "w") :
  cannot open file 'biomod2_template_ODMAP.knit.md': Read-only file system
Error in file(con, "w") : cannot open the connection
Calls: BIOMOD_Report ... <Anonymous> -> <Anonymous> -> write_utf8 -> writeLines -> file
Execution halted
