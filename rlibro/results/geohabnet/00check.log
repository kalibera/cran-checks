* using log directory ‘/var/scratch2/tomas/cran/rlibro/check/geohabnet.Rcheck’
* using R Under development (unstable) (2023-10-26 r85417)
* using platform: x86_64-pc-linux-gnu
* R was compiled by
    gcc (GCC) 13.2.1 20230728 (Red Hat 13.2.1-1)
    GNU Fortran (GCC) 13.2.1 20230728 (Red Hat 13.2.1-1)
* running under: Fedora Linux 38 (MATE-Compiz)
* using session charset: UTF-8
* checking for file ‘geohabnet/DESCRIPTION’ ... OK
* this is package ‘geohabnet’ version ‘1.0.0’
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ‘geohabnet’ can be installed ... OK
* checking package directory ... OK
* checking ‘build’ directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking whether startup messages can be suppressed ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking installed files from ‘inst/doc’ ... OK
* checking files in ‘vignettes’ ... OK
* checking examples ... OK
* checking for unstated dependencies in ‘tests’ ... OK
* checking tests ... ERROR
  Running ‘testthat.R’
Running the tests in ‘tests/testthat.R’ failed.
Last 13 lines of output:
   18.     └─base::library.dynam(lib, package, package.lib)
   19.       └─base::dyn.load(file, DLLpath = DLLpath, ...)
  ── Failure ('test-get_rasters.R:2:3'): get rasters with valid tif ──────────────
  Expected `get_rasters(list(file = c(.get_helper_filepath("avocado"))))` to run without any conditions.
  ℹ Actually got a <simpleError> with text:
    unable to load shared object '/var/scratch2ro/tomas/cran/rlibro/lib/stringi/libs/stringi.so':
      libicui18n.so.69: cannot open shared object file: No such file or directory
  ── Failure ('test-parameters.R:38:3'): Test 6: Test to set new parameters.yaml ──
  Expected `set_parameters(new_param_file)` to run without any conditions.
  ℹ Actually got a <simpleWarning> with text:
    cannot create file '/var/scratch2ro/tomas/cran/rlibro/lib/geohabnet/parameters.yaml', reason 'Read-only file system'
  
  [ FAIL 3 | WARN 0 | SKIP 0 | PASS 18 ]
  Error: Test failures
  Execution halted
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ‘inst/doc’ ... OK
* checking running R code from vignettes ... NONE
  ‘analysis.Rmd’ using ‘UTF-8’... OK
* checking re-building of vignette outputs ... ERROR
Error(s) in re-building vignettes:
--- re-building ‘analysis.Rmd’ using rmarkdown
geohabnet-package          package:geohabnet           R Documentation

_g_e_o_h_a_b_n_e_t: _A_n_a_l_y_s_i_s _o_f _C_r_o_p_l_a_n_d _C_o_n_n_e_c_t_i_v_i_t_y

_D_e_s_c_r_i_p_t_i_o_n:

     Geographical spatial analysis of cropland connectivity. Allows
     users to visualize risk index plots for a given set of crops. The
     functions are developed as an extension to analysis from Xing et
     al (2021) doi:10.1093/biosci/biaa067
     <https://doi.org/10.1093/biosci/biaa067>. The primary function is
     sean() and is indicative of how sensitive analysis is to
     parameters using kernel models. The Package currently supports
     crops sourced from Monfreda, C., N. Ramankutty, and J. A. Foley
     (2008) doi:10.1029/2007gb002947
     <https://doi.org/10.1029/2007gb002947> "Farming the planet: 2.
     Geographic distribution of crop areas, yields, physiological
     types, and net primary production in the year 2000, Global
     Biogeochem. Cycles, 22, GB1022" and International Food Policy
     Research Institute (2019) doi:10.7910/DVN/PRFF8V
     <https://doi.org/10.7910/DVN/PRFF8V> "Global
     Spatially-Disaggregated Crop Production Statistics Data for 2010
     Version 2.0, Harvard Dataverse, V4". This analysis produces 3 maps
     - mean, variance, and difference for the crop risk index. It
     applies distance functions and graph operations on a network to
     calculate risk index. There are multiple ways in which functions
     can be used - generate final outcome and then the intermediate
     outcomes for more sophisticated use cases. Refer to vignettes.
     sean() will set some global variables which can be accessed using
     $ prefix. These values are propagated to other functions for
     performing operations such as distance matrix calculation.
     parameters.yaml stores the parameters and values and can be
     accessed using get_parameters(). Refer it's usage. The objective
     of this package is to support risk analysis using cropland
     connectivity on 10 parameters - host crops, density threshold,
     aggregation and distance method, resolution, geographic extent,
     link threshold, kernel models, network metrics and maps. These
     parameters serves as an input and are used different phases of
     analysis workflow.

_A_u_t_h_o_r(_s):

     *Maintainer*: Krishna Keshav <mailto:kkeshav@ufl.edu>

     Authors:

        • Garrett Lab <mailto:karengarrett@ufl.edu>
          (https://garrettlab.com)

        • Karen Garrett <mailto:karengarrett@ufl.edu> (ORCID)

        • Aaron Plex <mailto:plexaaron@ufl.edu> (ORCID)

     Other contributors:

        • University of Florida (https://www.ufl.edu) [copyright
          holder, funder]

_S_e_e _A_l_s_o:

     Useful links:

        • <https://garrettlab.github.io/CroplandConnectivity/>

        •
          <https://github.com/GarrettLab/CroplandConnectivity/tree/main/geohabnet/>

        • <https://www.garrettlab.com/>

        • Report bugs at
          <https://github.com/GarrettLab/CroplandConnectivity/issues>


sean                 package:geohabnet                 R Documentation

_C_a_l_c_u_l_a_t_e _s_e_n_s_i_t_i_v_i_t_y _a_n_a_l_y_s_i_s _o_n _c_r_o_p_l_a_n_d _h_a_r_v_e_s_t_e_d _a_r_e_a _f_r_a_c_t_i_o_n

_D_e_s_c_r_i_p_t_i_o_n:

     This function calculates sensitivity analysis on cropland
     harvested area fraction based on provided parameters. Some
     parameters are only accessible from 'paramters.yaml' and uses
     value from here

_U_s_a_g_e:

     sean(
       rast,
       global = TRUE,
       geoscale,
       agg_methods = c("sum", "mean"),
       dist_method = "geodesic",
       link_threshold = 0,
       host_density_threshold = 0,
       res = reso(),
       maps = TRUE,
       outdir = tempdir()
     )
     
_A_r_g_u_m_e_n_t_s:

    rast: Raster object which will be used in analysis.

  global: Logical. 'TRUE' if global analysis, 'FALSE' otherwise.
          Default is 'TRUE'

geoscale: Vector. Geographical coordinates in the form of c(Xmin, Xmax,
          Ymin, Ymax)

agg_methods: vector. Aggregation methods

dist_method: character. One of the values from 'dist_methods()'

link_threshold: numeric. A threshold value for link

host_density_threshold: A host density threshold value

     res: numeric. resolution at which operations will run. Default is
          'reso()'

    maps: logical. 'TRUE' if maps are to be plotted, 'FALSE' otherwise

  outdir: Character. Output directory for saving raster in TIFF format.
          Default is 'tempdir()'.

_D_e_t_a_i_l_s:

     When 'global = TRUE', 'geoscale' is ignored and 'global_scales()'
     is used

_V_a_l_u_e:

     A list of calculated CCRI values using negative exponential

_R_e_f_e_r_e_n_c_e_s:

     Yanru Xing, John F Hernandez Nopsa, Kelsey F Andersen, Jorge L
     Andrade-Piedra, Fenton D Beed, Guy Blomme, Mónica Carvajal-Yepes,
     Danny L Coyne, Wilmer J Cuellar, Gregory A Forbes, Jan F Kreuze,
     Jürgen Kroschel, P Lava Kumar, James P Legg, Monica Parker, Elmar
     Schulte-Geldermann, Kalpana Sharma, Karen A Garrett, _Global
     Cropland Connectivity: A Risk Factor for Invasion and Saturation
     by Emerging Pathogens and Pests_, BioScience, Volume 70, Issue 9,
     September 2020, Pages 744–758, doi:10.1093/biosci/biaa067
     <https://doi.org/10.1093/biosci/biaa067>

     Hijmans R (2023). _terra: Spatial Data Analysis_. R package
     version 1.7-46, <https://CRAN.R-project.org/package=terra>

_S_e_e _A_l_s_o:

     Uses 'connectivity()'

_E_x_a_m_p_l_e_s:

     avocado <- cropharvest_rast("avocado", "monfreda")
     risk_indexes <- sean(avocado)
     

trying URL 'https://s3.us-east-2.amazonaws.com/earthstatdata/HarvestedAreaYield175Crops_Indvidual_Geotiff/avocado_HarvAreaYield_Geotiff.zip'
Content type 'application/zip' length 6271196 bytes (6.0 MB)
==================================================
downloaded 6.0 MB


Quitting from lines 99-100 [unnamed-chunk-5] (analysis.Rmd)
Error: processing vignette 'analysis.Rmd' failed with diagnostics:
unable to load shared object '/var/scratch2ro/tomas/cran/rlibro/lib/stringi/libs/stringi.so':
  libicui18n.so.69: cannot open shared object file: No such file or directory
--- failed re-building ‘analysis.Rmd’

SUMMARY: processing the following file failed:
  ‘analysis.Rmd’

Error: Vignette re-building failed.
Execution halted

* checking PDF version of manual ... OK
* DONE
Status: 2 ERRORs
